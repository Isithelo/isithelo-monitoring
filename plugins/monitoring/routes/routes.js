/*                                              
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  
                  @@@```````````````@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@+````````````@@@                  
                  @@@  ,;@@.       @@@@@@@@@@@@@@@@@@@@@@#@@@@@@@@@#  @`       @@@                  
                  @@@ .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@@@@@@@@@@@       @@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,@ @@@@@@@@#,@@@'#@`     @@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@',@`+@@@; @@#@@@@@@'     @@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,@ '@@@@@'@@@@@@@@@@:   @@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @  @ @+@@@@@@@@@@@@@@@@@  @@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   @@@ ;@@@@@@@@@@@@@@@@@ @@@                  
                 :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@;,@@@@@@@@@@@@@@@, @@@                  
              `;@@@@@@@@@@@@@@@@@@@@@@@@@@@@.@@@@@@@@@@@@#@@#,@@@@+,@@@@@@@@@@+@@@                  
             +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@' @@@##@@#@@@@+#@@@@@@@@@@@                  
             @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ `@@@@`@@ @@@@@@@@@                  
             +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @#@@@@@@@@@@@@@@ @@@@@@@                  
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@@`@`@+@@@@#@@@@@@@                 
           .;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+'@@@@ ##+@@@@@@                  
           @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.@@@@@@@@,                
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@' ++@@@'@@@@@@                 
           @@+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  :@@@@@@@@@@@.                
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,#@@@@@@@@@@@@@@@@@@@#                
            ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@'@@ #@@@@@@@@@@@@@              
              @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@'@@@@@@@@@@@@@@@@@@'  #,@@@@@@@@@@@@@+@             
            `:@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@.,             
            `@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.             
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@;@@@@@@@@@@@@'@@@@@@@@@@@@@@@@@@@@@@@@@@`             
           @'@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:@@@@@@@@@@@;@@,@@@`@@@@@@@@:              
          ` @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#@@@#@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@ +            
         ` @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@@'@@@@:@@@@@@@@@@@@@@@@@ @@@@@@@@@@'            
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@.;:@@,'@@@@@@@@@@@@@@@@:           
         '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@+           
        ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@;+@@@@'     @@@@@@@@@@@           
        ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@.@@@@@@@@@@@@@@@;@@,, @@ ,@@@@@@@@@@@@;@         
        `@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@,@@@@@@@@@@@@@@@@@@@@@@'`@..@@@@@@@@@@@@@@@@      
         @@@@@@@ #@@@@@@@@@@@@@@@@@@@@@@@@@@@#@@@@@@+@@@@@@@@@@@@@@@@@@@@@@#@@@@@@@@@@@@@@@@@@:#    
          ;@@@@   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@'#@@@@@@@@@@@@@@@@@@@@@@@    
          `@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@    
            @+  @:@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.@@@@@@@@@@@@@+@@@@@@#@@ @,@@@@@@@@@@@@@@@+@@@    
            @`  @@@@@@@@;'@+@@@@+@@@@@@@@@@@@@@@  +@@@@@@@@@@@@@@@@@@@  `@@:@@@@@@@@@@@@@@@@@@@;    
            #  @@@@@@@:   ,@@:@:@@@@@@@@@@@@@@@@+ @@@@@@@@@@;@'@@@@@@@     @@@ @@@#@. @@@@@@ @@@    
               @@@@@@`         ' #@@@,@@@@@@@@@@@:@@@@@@@@@@:.  ,@ ;@+      ;  @@@@;   @@@`   @.    
                @`@@@                .@@@@@@@@@@@@@@@@@@@@@:     @@,@          @@@:`    @+          
                `:@@@                 @@@@@@@@@@@@@@@@@@@@@        #@          @@@      @#          
                  @@@                  @@@@@@@@@@@@@@@@@@@@                    @@@                  
                  @@@                  `@@@@@@@@@@@@@@@@@@@                    @@@                  
                  @@@                   @@@@@@@@@@@@@@@@@@@                    @@@                  
                  @@@                   @@@@@@@@@@@@@@@@@@@                    @@@                  
                  @@@                   @@@@@@@@@@@@@@@@@@@                    @@@                  
                  @@@                   @@@@@@@@@@@@@@@@@@+                    @@@                  
                  @@@                   @@@@@@@@@@@@@@@@@@#                    @@@                  
                  @@@                   @@@@@@@@@@@@@@@@@@#                    @@@                  
                  @@@                   @@@@@@@@@@@@@@@@@@@                    @@@                  
                  @@@                   '@@@@@@@@@@@@@@@@@@                    @@@                  
                  @@@                   ;@@@@@@@@@@@@@@@@@'                    @@@                  
                  @@@                   ,@@@@@@@@@@@@@@@@@                     @@@                  
                  @@@                   `@@@@@@@@@@@@@@@@@                     @@@                  
                  @@@                    @@@@@@@@@@@@@@@@@                     @@@                  
                  @@@                    @@@@@@@@@@@@@@@@@                     @@@                  
                  @@@                    @@@@@@@@@@@@@@@@@                     @@@                  
                  @@@                    @@@@@@@@@@@@@@@@@                     @@@                  
                  @@@++++++++++++++++++++@@@@@@@@@@@@@@@@@#++++++++++++++++++++@@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                      
                                    
      */
var express = require('express');
var path = require('path');
var logger = require('morgan');
var compression = require('compression');
var methodOverride = require('method-override');
var session = require('express-session');
var flash = require('express-flash');
var bodyParser = require('body-parser');
var expressValidator = require('express-validator');
var dotenv = require('dotenv');
var exphbs = require('express-handlebars');
var mongoose = require('mongoose');
var passport = require('passport');
var recaptcha = require('express-recaptcha');
var braintree = require("braintree");
var app = express.Router();

//set the plugin controller directory
var directory = '../../../plugins/monitoring/'

// Controllers
var createController = require(directory+'controllers/create'); 
var createScadaController = require(directory+'controllers/createscada'); 
var readController = require(directory+'controllers/read');
var readScadaController = require(directory+'controllers/readscada');

///////////////////////////   THESE ROUTES CAN BE REMOVED FOR CUSTOM SITES   ///////////////////////////
var monitoringController = require(directory+'controllers/monitoringpages'); 

///////////////////////////////////
////       COMPONENTS         //// 
/////////////////////////////////

app.get('/monitoring', monitoringController.monitoring); 
 
///////////////////////////   THESE ROUTES CAN BE REMOVED FOR CUSTOM SITES   ///////////////////////////
  
/////////////////////////////////////////
////       CREATE CONTROLLERS       //// 
///////////////////////////////////////
app.post('/monitoring/createform', createController.create);
 
////////////////////////////////////////////////
////       CREATE SCADAA CONTROLLERS       //// 
//////////////////////////////////////////////
app.post('/monitoring/createscada', createScadaController.create);

/////////////////////////////////////////
////       READ CONTROLLERS         //// 
///////////////////////////////////////
app.get('/monitoring/getprimer',   readController.getprimer);//get the primer form.
app.get('/monitoring/getraw',   readController.getraw);//get the raw form.
app.get('/monitoring/jstree', readController.jstree);//get jstree 
app.get('/monitoring/templateload', readController.templateload);//Load Template
app.get('/monitoring/templatename', readController.templatename);//get the select templatename
app.get('/monitoring/getdatacomp', readController.getdatacomp);//get data by array of ids.
app.get('/monitoring/getform',  readController.getform);//search for the form to load.
app.get('/monitoring/groups', readController.groups);//get the select groups

/////////////////////////////////////
////       READ SCADA DATA      //// 
///////////////////////////////////
app.get('/monitoring/getscada', readScadaController.getscada);


//last line
module.exports = app;