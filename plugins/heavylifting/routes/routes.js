/*
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                             `,;+@@@';,                                             
                                        '@@@@@@@@@@@@@@@@@@@:                                       
                                    :@@@@@@@@@@@@@@@@@@@@@@@@@@@.                                   
                                 ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                 
                               +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,                              
                             #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,                            
                           '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`                          
                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                         
                        #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,                       
                       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                      
                     ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                     
                    +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`                   
                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,                  
                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:                 
                 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:                
                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.               
               +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@               
              ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@              
              @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@             
             @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#            
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@           
           @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#          
          '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
         #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@        
        +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@        
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       
       .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       
       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:      
       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   @@@@@####@   .     '@@@@@@@@@@@@@@@@@@@@@@@@      
      :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@'   @@@;                 @@@@@@@@@@@@@@@@@@@@@@@      
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`   @@                    @@@@@@@@@@@@@@@@@@@@@@:     
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @                      .              ;@@@@@@     
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`  @@@@@@:   @.                      : :++++++++'       @@@     
     '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   .@@@@@ ;`                  @+      @@@@@@@@@@@@@@';          
     @@@@@@@@@@@@@@@@@@@@#@@@@@@@@@; `  @@@@@:                     @      `;@@@@@@@@@@@@@@@@:  :    
     @@@@@@@@@@@@@@@@@@     ,@@@@@@  @   @@@#                ++            ` ,@@@@@@@@@@@@@@@@@#    
     @@@@@@@@@@@@@@@@@        `@;        ;@@,                @@            @`  @@@@@@@@@@@@@@@@@    
     @@@@@@@@@@@@@@@@   @,    `           @@                +@@@          `  '  +@@@@@@@@@@@@@@@    
    `@@@@@@@@@@@@@@@;  @@@@@ ;            ;#                 @@@@.           @@  .@@@@@@@@@@@@@@    
    ,@@@@@@@@@@@@@@@  @@@@@@                              @  ,@@@@@       .  @@@   @@@@@@@@@@@@@    
    ;@@@@@@@@@@@@@@  @@@@@@                         .    @@   @@@@@@@@#'     @@@@:  @@@@@@@@@@@@    
    '@@@@@@@@@@@@@  ,@@@@@'                        @.   @@@@  .@@@@@@@@@'   @@@@@@@  @@@@@@@@@@@    
    @@@@@@@@@@@@@#  @@@@@@                      `  @@@#@@@@@'  @@@@@@@@@@@  :@@@@@@@  @@@@@@@@@@    
    @@@@@@@@@@@@@  #@@@@@:                     ;   @@@@@@@@@@  +@@@@@@@@@@@,:@@@@@@@@  @@@@@@@@@    
    @@@@@@@@@@@@   @@@@@@                     ;@   @@@@@@@@@@  +@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@    
    '@@@@@@@@@@.  @@@@@@#                `@::@@@  .@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@    
    ;@@@@@@@@@@   @@@@@@;                @@@@@@@  @@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@    
    ,@@@@@@@@@   @@@@@@@;               `@@@@@@@  @@@@@@@@@@@@+   :;@@@@@@@@@@@@@@@@@@@@@  @@@@@    
     @@@@@@@@.   @@@@@@@:               @@@@@@@@  @@@@@@@@@@@@@@`   `@@@@@@@@@@@@@@@@@@@@. ;@@@@    
     @@@@@@@@   @@@@@@@@:              @@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  @@@@    
     @@@@@@@#  @@@@@@@@@;             @@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@    
     @@@@@@@  @@@@@@@@@@;            @@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@'    
     @@@@@@  @@@@@@@@@@@@           @@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`    
     :@@@@  #@@@@@@@@@@@@          @@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     
      @@@: :@@@@@@@@@@@@@@       +@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     
      @@@  @@@@@@@@@@@@@@@@:`:` +@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     
      @@  @@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`     
      .  @@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      
        ;@@@@@@@@@@@@@@@@@@@@@ ,@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      
       ;@@@@@@@@@@@@@@@@@@@@@  +@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`      
        @@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@: ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       
        @@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+       
        ,@@@@@@@@@@@@@@@@@@  .@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@        
         @@@@@@@@@@@@@@@@   ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@        
         ,@@@@@@@@@@@@,    #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
          @@@@@@@@@@@@,  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#         
          `@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
           @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,          
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@           
            ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
             @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.            
              @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@             
               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@              
               `@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@               
                ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                
                 :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                 
                  :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  
                   .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                   
                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    
                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#                     
                       #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                      
                        `@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                        
                          #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,                         
                            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+                           
                              @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#                             
                                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@'                               
                                  :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`                                 
                                     :@@@@@@@@@@@@@@@@@@@@@@@@@`                                    
                                         ,#@@@@@@@@@@@@@@@'`                                                                                                        
*/

var express = require('express');
var path = require('path');
var logger = require('morgan');
var compression = require('compression');
var methodOverride = require('method-override');
var session = require('express-session');
var flash = require('express-flash');
var bodyParser = require('body-parser');
var expressValidator = require('express-validator');
var dotenv = require('dotenv');
var exphbs = require('express-handlebars');
var mongoose = require('mongoose');
var passport = require('passport');
var recaptcha = require('express-recaptcha');
var braintree = require("braintree");
var app = express.Router();


//set the plugin controller directory
var directory = '../../../plugins/heavylifting/'

// Controllers - Common
var HomeController = require('../../../controllers/home');

//Heavy-lifting Controllers
var initController = require(directory+'controllers/initialize');
var adminController = require(directory+'controllers/admin');
var createController = require(directory+'controllers/create');
var readController = require(directory+'controllers/read');
var deleteController = require(directory+'controllers/delete');
var pagesController = require(directory+'controllers/pages');
var productController = require(directory+'controllers/product');
var assemblyController = require(directory+'controllers/assembly');
var componentController = require(directory+'controllers/component');

var organizationController = require(directory+'controllers/organization');


///////////////////////////   THESE ROUTES CAN BE REMOVED FOR CUSTOM SITES   ///////////////////////////
var heavyliftingController = require(directory+'controllers/heavyliftingpages'); 
///////////////////////////   THESE ROUTES CAN BE REMOVED FOR CUSTOM SITES   ///////////////////////////
var heavyliftingController = require(directory+'controllers/heavylifting');

app.get('/getuserdetails/:userid/', 
  //componentController.componentforms, 
  //componentController.usercomponents,
  //organizationController.userorganizations,
  //componentController.organizationcomponents,
  heavyliftingController.heavyliftingalluser, 
  heavyliftingController.getuserdetails
  );

/////////////////////////////
////       PAGES        //// 
///////////////////////////
app.get('/database', pagesController.database);
app.get('/shop', pagesController.shop);
app.get('/documentation', pagesController.documentation);
app.get('/heavylifting/forms', pagesController.forms);
app.get('/configuration', pagesController.configuration);
app.get('/assemblies', pagesController.assemblies);
app.get('/reports', pagesController.reports); 


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////
////       INITIALIZE DATABASE         //// 
//////////////////////////////////////////
app.get('/init', initController.deletedb);
app.get('/deletedb', initController.deletedb);
app.get('/getdb', initController.getdb);


//////////////////////////////////////////////////////////////////////
////        PRIMARY ADMINISTRATIVE DATABASE MODIFICATION         //// 
////////////////////////////////////////////////////////////////////
app.get('/hl-admin', adminController.hadmin);
app.get('/read',  adminController.read);
app.get('/update',  adminController.update);
app.get('/delete',  adminController.delete);


/////////////////////////////////
////        DATABASE        //// 
///////////////////////////////
app.get('/heavylifting/templateload', readController.templateload);//Load Template


/////////////////////////////////////////
////       CREATE CONTROLLERS       //// 
///////////////////////////////////////
app.post('/heavylifting/create',  createController.create);


///////////////////////////////////////////
////       DELETE CONTROLLERS         //// 
/////////////////////////////////////////
app.get('/heavylifting/deleteentryperm', deleteController.deleteentryperm);//get data by array of ids.
app.get('/heavylifting/deleteentry', deleteController.deleteentry);//get data by array of ids permanently.


/////////////////////////////////////////
////       READ CONTROLLERS         //// 
///////////////////////////////////////
app.get('/getCollectionData', readController.getCollectionData);//admin page table view.
app.get('/heavylifting/getdata', readController.getdata);//get data by array of ids.
app.get('/heavylifting/getdatacomp', readController.getdatacomp);//get data by array of ids.
app.get('/parentid', readController.parentid);//get data by parentid
app.get('/getshortdata', readController.getshortdata);//get data 
app.get('/heavylifting/jstree', readController.jstree);//get jstree 
app.get('/heavylifting/getformfield', readController.getformfield);//get the select ddrop down items
app.get('/heavylifting/templatename', readController.templatename);//get the select templatename
app.get('/heavylifting/groups', readController.groups);//get the select groups
app.get('/navmenuload', readController.navmenuload);//get the navmenu
app.get('/loadusermenu', readController.loadusermenu);//get the usermenu
app.get('/loadcompmenu', readController.loadcompmenu);//get the loadcompmenu
app.get('/singleidcall', readController.singleidcall);//get the single element id
app.get('/heavylifting/findme', readController.findme);//get the single element id
app.get('/getassemblyall', readController.getassemblyall);//get the get assembly all element id
app.get('/defaultassy', readController.defaultassy);//get the get assembly all element id
app.get('/getformraw', readController.getformraw);// getformraw
app.get('/getcompform', readController.getcompform);// getformraw


/////////////////////////////////////
////       PRODUCTS             //// 
///////////////////////////////////
app.get('/heavylifting/productload', productController.productload);// getformraw


/////////////////////////////////////
////       ASSEMBLY             //// 
///////////////////////////////////
app.get('/assembly/new',  assemblyController.newassy);
app.get('/heavylifting/getform',  componentController.additionaldetails , readController.getform);//search for the form to load.




//Messing here.

/////////////////////////////////
////       HOME             //// 
///////////////////////////////
 
app.get('/',
  componentController.componentforms, 
  componentController.usercomponents,
  organizationController.userorganizations,
  componentController.organizationcomponents,
  heavyliftingController.heavyliftingalluser, 
  HomeController.index
);


//////////////////////////////////////
////       REDUNDANT             //// 
////////////////////////////////////
app.get('/cvpageload', readController.cvpageload);
 

///////////////////////////////////
////       COMPONENTS         //// 
/////////////////////////////////
app.get('/components/', componentController.components);





//Rebuild routing
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
/////////////////////////////////
////       TEMPALTES        //// 
///////////////////////////////
app.get('/privacy', heavyliftingController.privacy);
app.get('/terms', heavyliftingController.terms);

///////////////////////////////////////////////////
////        USER INTERFACE CONTROLLER         //// 
/////////////////////////////////////////////////
app.get('/users/', heavyliftingController.users);
app.get('/users/:username/',componentController.componentforms, componentController.usercomponents,organizationController.userorganizations,componentController.organizationcomponents,heavyliftingController.heavyliftingalluser ,heavyliftingController.profile);
app.get('/users/:username/settings/',heavyliftingController.settings);
app.get('/users/:username/settings/:page', componentController.componentforms,componentController.usercomponents,organizationController.userorganizations,componentController.organizationcomponents , heavyliftingController.page);
app.get('/usersearch', heavyliftingController.usersearch);

 










app.get('/componentssuperadmin/', componentController.componentssuperadmin);
app.get('/component/new', organizationController.ajaxorguserread , componentController.componentforms, componentController.newcomp);

//User Components
app.get('/components/users/', componentController.usersview);
app.get('/components/users/:username/', componentController.users);
app.get('/components/users/:username/:compid', componentController.compiduser);
//Organization Components
app.get('/components/organizations/', componentController.organizationsview);
app.get('/components/organizations/:orgname', componentController.organizations);
app.get('/components/organizations/:orgname/:compid', componentController.compidorg);


//Viewer and calculator
app.get('/components/:compid', componentController.compmore);

//Viewer and calculator (Group) - Stage 2
app.get('/components/:template/:compgroupid',readController.query,readController.query1,readController.query2,readController.query3,readController.query4 , componentController.compmore);

 */


//last line
module.exports = app;